<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self'; 
    script-src 'self' 'unsafe-inline' 'unsafe-eval' https://maps.googleapis.com https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://cdn.sheetjs.com https://nominatim.openstreetmap.org https://unpkg.com; 
    style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://unpkg.com; 
    img-src 'self' data: https: http:; 
    font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com; 
    connect-src 'self' https://maps.googleapis.com https://nominatim.openstreetmap.org https://*.googleapis.com https://*.tile.openstreetmap.org https://unpkg.com https://cdn.jsdelivr.net https://cdnjs.cloudflare.com; 
    frame-src 'self' https://www.google.com;
  ">
  <title>Οργανωτής Βαφέα Pro</title>
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="assets/icons/favicon.ico">

  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Flatpickr Date Picker -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/gr.js"></script>
  
  <!-- Google Maps -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDbO_6f6Y_y_2_2MreK0XTWAIsZw-2AKWQ&libraries=geometry,places&callback=initMap&loading=async" defer></script>
  
  <!-- Leaflet Maps (Fallback) - Loaded conditionally via JavaScript -->
  
  <!-- Nominatim Geocoding (OpenStreetMap) - No API key needed -->
  <script>
    // Nominatim Geocoding Helper
    const Geocoding = {
      async getCoordinates(address, city = 'Αλεξανδρούπολη', country = 'Ελλάδα') {
        try {
          const query = `${address}, ${city}, ${country}`;
          const url = `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}&limit=1`;
          
          const response = await fetch(url, {
            headers: {
              'User-Agent': 'Painter-Organizer-App/1.0'
            }
          });
          
          if (!response.ok) throw new Error('Geocoding failed');
          
          const data = await response.json();
          
          if (data && data.length > 0) {
            return {
              lat: parseFloat(data[0].lat),
              lng: parseFloat(data[0].lon)
            };
          }
          
          return null;
        } catch (error) {
          console.warn('Geocoding error:', error);
          return null;
        }
      }
    };
  </script>
  
  <!-- Chart.js για γραφήματα -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
  
  <!-- jsPDF για PDF export -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  
  <!-- SheetJS για Excel export -->
  <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
  
  <!-- Styles -->
  <link rel="stylesheet" href="src/css/variables.css">
  <link rel="stylesheet" href="src/css/base.css">
  <link rel="stylesheet" href="src/css/sidebar.css">
  <link rel="stylesheet" href="src/css/components.css">
  <link rel="stylesheet" href="src/css/dashboard.css">
  <link rel="stylesheet" href="src/css/tables.css">
  <link rel="stylesheet" href="src/css/modals.css">
  <link rel="stylesheet" href="src/css/animations.css">
  <link rel="stylesheet" href="src/css/responsive.css">
  <link rel="stylesheet" href="src/css/print.css">
</head>
<body data-theme="dark">
  
  <!-- Offline Indicator -->
  <div id="offlineIndicator" class="offline-indicator hidden">
    <i class="fas fa-wifi-slash"></i>
    <span data-translate="offline">Λειτουργία Offline</span>
  </div>

  <!-- Sidebar Navigation -->
  <aside id="sidebar" class="sidebar">
    <div class="sidebar-header">
      <div class="logo">
        <i class="fas fa-paint-roller"></i>
        <div class="logo-text">
          <span class="company-name" id="sidebarCompanyName">Οργανωτής Βαφέα</span>
        </div>
      </div>
      <button id="sidebarToggle" class="sidebar-toggle" aria-label="Toggle Sidebar">
        <i class="fas fa-bars"></i>
      </button>
    </div>

    <nav class="sidebar-nav">
      <a href="#dashboard" class="nav-item active" data-section="dashboard">
        <i class="fas fa-home"></i>
        <span data-translate="dashboard">Αρχική</span>
      </a>
      <a href="#jobs" class="nav-item" data-section="jobs">
        <i class="fas fa-briefcase"></i>
        <span data-translate="jobs">Εργασίες</span>
      </a>
      <a href="#clients" class="nav-item" data-section="clients">
        <i class="fas fa-users"></i>
        <span data-translate="clients">Πελάτες</span>
      </a>
      <a href="#workers" class="nav-item" data-section="workers">
        <i class="fas fa-hard-hat"></i>
        <span>Προσωπικό</span>
      </a>
      <a href="#inventory" class="nav-item" data-section="inventory">
        <i class="fas fa-boxes"></i>
        <span data-translate="inventory">Αποθήκη</span>
      </a>
      <a href="#calendar" class="nav-item" data-section="calendar">
        <i class="fas fa-calendar-alt"></i>
        <span data-translate="calendar">Ημερολόγιο</span>
      </a>
      <a href="#map" class="nav-item" data-section="map">
        <i class="fas fa-map-marked-alt"></i>
        <span>Χάρτης</span>
      </a>
      <a href="#statistics" class="nav-item" data-section="statistics">
        <i class="fas fa-chart-bar"></i>
        <span>Στατιστικά</span>
      </a>
      <a href="#settings" class="nav-item" data-section="settings">
        <i class="fas fa-cog"></i>
        <span data-translate="settings">Ρυθμίσεις</span>
      </a>
    </nav>
  </aside>

  <!-- Main Content -->
  <main id="mainContent" class="main-content">
    
    <!-- Header -->
    <header class="header">
      <img src="assets/icons/logo.png" alt="Οργανωτής Βαφέα" class="header-logo">
      <button id="mobileMenuBtn" class="mobile-menu-btn" aria-label="Menu">
        <i class="fas fa-bars"></i>
      </button>
    </header>

    <!-- Content Area -->
    <div id="contentArea" class="content-area">
      <!-- Το περιεχόμενο θα φορτώνεται δυναμικά εδώ -->
    </div>
  </main>

  <!-- Toast Container -->
  <div id="toastContainer" class="toast-container"></div>

  <!-- Modal Container -->
  <div id="modalContainer" class="modal-container"></div>

  <!-- Scripts -->
  <script src="src/js/config.js"></script>
  <script src="src/js/i18n.js"></script>
  <script src="src/js/storage.js"></script>
  <script src="src/js/state.js"></script>
  <script src="src/js/utils.js"></script>
  <script src="src/js/validation.js"></script>
  <script src="src/js/toast.js"></script>
  <script src="src/js/modal.js"></script>
  <script src="src/js/autocomplete.js"></script>
  <script src="src/js/keyboard.js"></script>
  <script src="src/js/theme.js"></script>
  <script src="src/js/sidebar.js"></script>
  <script src="src/js/router.js"></script>
  <script src="src/js/search.js"></script>
  <script src="src/js/table.js"></script>
  <script src="src/js/pagination.js"></script>
  <script src="src/js/export.js"></script>
  <script src="src/js/models/timesheet.js"></script>
  <script src="src/js/views/dashboard.js"></script>
  <script src="src/js/views/clients.js"></script>
  <script src="src/js/views/workers.js"></script>
  <script src="src/js/views/inventory.js"></script>
  <script src="src/js/views/jobs.js"></script>
  <script src="src/js/views/calendar.js"></script>
  <script src="src/js/views/map.js"></script>
  <script src="src/js/views/offers.js"></script>
  <script src="src/js/views/invoices.js"></script>
  <script src="src/js/views/statistics.js"></script>
  <script src="src/js/views/templates.js"></script>
  <script src="src/js/views/settings.js"></script>
  <script src="src/js/app.js"></script>

</body>
</html>
