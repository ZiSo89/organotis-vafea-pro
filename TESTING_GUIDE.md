# 🔧 Οδηγίες Δοκιμής - Electron Database Fix

## ✅ Διορθώσεις που Εφαρμόστηκαν

Το πρόβλημα με τη σύνδεση δεδομένων στο Electron **διορθώθηκε**! Οι αλλαγές περιλαμβάνουν:

1. **Διόρθωση API routing** - Όλες οι μέθοδοι τώρα χρησιμοποιούν SQLite στο Electron
2. **Αυτόματη μετατροπή snake_case ↔ camelCase** - Συμβατότητα database ↔ frontend
3. **Βελτιωμένη επιστροφή δεδομένων** - Create/Update επιστρέφουν τα ενημερωμένα records
4. **Debug logging** - Εύκολος εντοπισμός προβλημάτων

## 🚀 Πώς να Δοκιμάσετε

### 1. Εκκίνηση Electron App

```powershell
npm start
```

### 2. Έλεγχος Console (DevTools)

Πατήστε `Ctrl+Shift+I` για να ανοίξετε τα DevTools και ελέγξτε το console:

```
🖥️ Running in Electron - Offline Mode
📱 SQLite Database Active
✅ SQLite database initialized
✅ Sync manager initialized
📱 Electron: list clients
📱 Electron: list jobs
📱 Electron: list workers
...
```

### 3. Έλεγχος Δεδομένων

#### ✓ Dashboard
- Ανοίξτε το Dashboard
- Θα πρέπει να βλέπετε τα στατιστικά:
  - Σύνολο Πελατών
  - Ενεργές Εργασίες
  - Υλικά με Χαμηλό Απόθεμα

#### ✓ Πελάτες
- Πηγαίνετε στη λίστα πελατών
- Θα πρέπει να βλέπετε 5 πελάτες (από το initial sync):
  - Γιάννης Παραδός
  - Μαρία Νικολάου
  - Κώστας Γεωργίου
  - Έλενη Αθανασίου
  - Νίκος Δημητρίου

#### ✓ Εργασίες
- Πηγαίνετε στις εργασίες
- Θα πρέπει να βλέπετε 4 εργασίες

#### ✓ Υλικά
- Πηγαίνετε στα υλικά
- Θα πρέπει να βλέπετε 10 υλικά

#### ✓ Εργάτες
- Πηγαίνετε στους εργάτες
- Θα πρέπει να βλέπετε 4 εργάτες

### 4. Δοκιμή CRUD Operations

#### Δημιουργία Νέου Πελάτη
```
1. Πατήστε "Νέος Πελάτης"
2. Συμπληρώστε τα στοιχεία (camelCase fields όπως postalCode)
3. Αποθηκεύστε
4. Ο πελάτης πρέπει να εμφανιστεί στη λίστα
```

#### Επεξεργασία Πελάτη
```
1. Κάντε κλικ στον πελάτη
2. Πατήστε "Επεξεργασία"
3. Αλλάξτε κάποιο πεδίο
4. Αποθηκεύστε
5. Οι αλλαγές πρέπει να φαίνονται αμέσως
```

#### Διαγραφή
```
1. Κάντε κλικ στον πελάτη
2. Πατήστε "Διαγραφή"
3. Επιβεβαιώστε
4. Ο πελάτης πρέπει να εξαφανιστεί
```

### 5. Έλεγχος Database

Τα δεδομένα αποθηκεύονται στο:
```
C:\Users\{USERNAME}\AppData\Roaming\organotis-vafea\painter_app.db
```

Μπορείτε να ανοίξετε αυτό το αρχείο με SQLite browser για να δείτε τα δεδομένα.

## 🔍 Troubleshooting

### Πρόβλημα: Δεν βλέπω δεδομένα

**Λύση:**
```powershell
# 1. Διαγράψτε το database για fresh start
Remove-Item "$env:APPDATA\organotis-vafea\painter_app.db"

# 2. Ξανατρέξτε το app - θα γίνει auto-sync
npm start
```

### Πρόβλημα: Console errors για snake_case fields

**Επαληθεύστε ότι η μετατροπή δουλεύει:**
```javascript
// Στο console
const clients = await window.electronAPI.db.getAll('clients');
console.log(clients[0]);

// Θα πρέπει να δείτε:
{
  id: 1,
  name: "...",
  postalCode: "...",  // ✓ camelCase
  createdAt: "...",   // ✓ camelCase
  // ΟΧΙ postal_code, created_at
}
```

### Πρόβλημα: Σφάλματα κατά την αποθήκευση

**Ελέγξτε το console για:**
```
📱 Electron: create clients
```

Αν δείτε error, ελέγξτε αν τα πεδία είναι σωστά (camelCase).

## 📋 Checklist Επιτυχούς Δοκιμής

- [ ] Η εφαρμογή ανοίγει χωρίς errors
- [ ] Το console δείχνει "Offline Mode"
- [ ] Το Dashboard εμφανίζει στατιστικά
- [ ] Η λίστα πελατών εμφανίζει 5 πελάτες
- [ ] Μπορώ να δημιουργήσω νέο πελάτη
- [ ] Μπορώ να επεξεργαστώ πελάτη
- [ ] Μπορώ να διαγράψω πελάτη
- [ ] Όλα τα παραπάνω λειτουργούν και για Jobs, Workers, Materials

## 📚 Επιπλέον Πληροφορίες

Δείτε το αρχείο `ELECTRON_FIX.md` για τεχνικές λεπτομέρειες των αλλαγών.

## 🆘 Αν Εξακολουθεί να Μην Δουλεύει

1. Ελέγξτε το console για errors
2. Ελέγξτε ότι το SQLite database δημιουργήθηκε
3. Ελέγξτε ότι έγινε sync από τον server
4. Δοκιμάστε να διαγράψετε το database και να ξανατρέξετε

---

**Σημείωση:** Αυτές οι αλλαγές επηρεάζουν **μόνο την Electron έκδοση**. Η web έκδοση συνεχίζει να λειτουργεί κανονικά με το PHP backend.
